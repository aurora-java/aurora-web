<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>${page:title}</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
${page:html.head.css} 
${page:html.head.script}
</head>
<body>
    <script language="javascript">
    	/**
    	超时标志，具体操作过程为：
    	1.在default.tplt中注册timeout事件
    	2.超时时调用main.screen的showlogin方法并设置isTimeout为true
    	3.用户在login_timeout.screen输入密码，如果成功则将isTimeout重新设置为false
    	**/
    	var isTimeout = false;
    
        function checkFrame(){
	    	Aurora.Status.enable = false;
			Aurora.SideBar.enable = false;
            if(parent && parent.unionKey == "hap_main"){                
            }else{
                //window.location.href = '${page:contextPath}/error_wrong_entrance.screen';
            }
        }

        checkFrame();
        if(parent && parent.ajaxSuccessFunction){
			Ext.Ajax.on('requestcomplete',parent.ajaxSuccessFunction);        
        }
        
        function isIpad() {
            var ua = navigator.userAgent.toLowerCase();
            if (ua.match(/iPad/i) == "ipad") {
                return true;
            } else {
                return false;
            }
        }
        
        Aurora.manager.on('timeout',function(){
            if(parent && parent.showlogin && !isTimeout){
 				isTimeout = true;
            	parent.showlogin();    
            }
        });
		
    </script>
    <div></div>
	${page:init}
	${page:content}
	<input type="hidden" class="logLink" screen="${/@service_name}" value="viewlog?file=${/@SERVICE_LOGGING_FILE}"/>	
</body>
</html>